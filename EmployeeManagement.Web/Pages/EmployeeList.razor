@page "/"
@using EmployeeManagement.Models
@inherits EmployeeListBase

@attribute [Authorize]
<h3>Employee List</h3>
<style>
    .thead-light span {
        cursor: pointer;
    }

    .thead-light i {
        color: darkblue;
        padding: 5px;
    }
</style>
@if (Employees == null)
{
    <div class="spinner"></div>
}

else
{
    <div>
        <div class="form-group row">
            <label for="gender2" class="col-sm-2 col-form-label">
                Gender
            </label>
            <div class="col-sm-10">
                <Select id="gender2" name="selectedGender"   @onchange="@SearchByGender" class="form-control">

                    <option value="-1">select...</option>
                    @foreach (var gender in Enum.GetValues(typeof(Gender)))
                        {
                        <option value="@gender">@gender</option>
                        }
                </Select>
            </div>
        </div>

    </div>
    <input type="checkbox" @bind="ShowFooter" id="showFooter" />
    <label for="">Show Footer</label>
    <span>@SelectedEmployeesCount</span>
    <table class="table">
        <thead class="thead-light">
            <tr>
                <th><span @onclick="@(() => Sort("FirstName"))">Name</span>
                    <i class="@(SortIndicator("FirstName"))"></i>
                </th>
                <th><span @onclick="@(() => Sort("Email"))">Email</span>
                    <i class="@(SortIndicator("Email"))"></i>
                </th>
                <th><span @onclick="@(() => Sort("dateOfBrith"))">Date Of Birth</span>
                    <i class="@(SortIndicator("dateOfBrith"))"></i>
                </th>
                <th>Actions</th>
                @*<th>Name</th>
                <th>Email</th>
                <th>Date Of Birth</th>*@
            </tr>
        </thead>

        @foreach (var employee in SearchedEmployees)
        {
            <DisplayEmployee Employee="employee" ShowFooter="ShowFooter" OnEmployeeSelection="EmployeeSelectionChanged" onEmployeeDeleted="EmployeeDeleted"></DisplayEmployee>

        }
        <Pager PageIndex=@paginatedList.PageNumber TotalPages=@paginatedList.TotalPages OnClick="PageIndexChanged"
               HasNextPage=@paginatedList.HasNextPage HasPreviousPage=@paginatedList.HasPreviousPage>
        </Pager>
        @if (SearchedEmployees.Count() == 0)
        {
            <div class="d-flex justify-content-center">
                there is no data to be displayed
            </div>

        }
    </table>

    }
